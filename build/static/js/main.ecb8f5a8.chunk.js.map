{"version":3,"sources":["services/persons.js","components/Filter.js","components/Notification.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/App.js","index.js"],"names":["baseUrl","id","axios","get","then","response","data","newObject","post","delete","Filter","handleChange","filter","onChange","value","Notification","message","className","type","PersonForm","onNameChange","onNumberChange","onSubmit","newName","newNumber","Person","person","onClick","name","number","Persons","persons","p","toLowerCase","includes","map","key","App","useState","setPersons","setMessage","setNewName","setNewNumber","setFilter","useEffect","PersonService","initial","event","target","preventDefault","setTimeout","catch","error","window","confirm","deleteName","ReactDOM","render","document","getElementById"],"mappings":"+PAGMA,EAAU,eA2BD,EApBH,SAAAC,GAEV,OADgBC,IAAMC,IAAN,UAAaH,EAAb,YAAwBC,IACzBG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB5B,EAzBA,WAEb,OADgBJ,IAAMC,IAAIH,GACXI,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAuB5B,EAfA,SAAAC,GAEb,OADgBL,IAAMM,KAAKR,EAASO,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa5B,EAVI,SAAAL,GAEjB,OADgBC,IAAMO,OAAN,UAAgBT,EAAhB,YAA2BC,IAC5BG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCT5BI,EAXA,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,aAAcC,EAAa,EAAbA,OAE9B,OACE,iDAEE,2BAAOC,SAAUF,EAAcG,MAAOF,MCO7BG,EAZM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAwB,OAApBA,EAAQA,QACH,KAIP,yBAAKC,UAAWD,EAAQE,MACrBF,EAAQA,UCyBAG,EAhCI,SAAC,GAQX,IANLC,EAMI,EANJA,aACAC,EAKI,EALJA,eACAC,EAII,EAJJA,SACAC,EAGI,EAHJA,QACAC,EAEI,EAFJA,UAGF,OACE,0BAAMF,SAAUA,GACd,qCAEE,2BACER,MAAOS,EACPV,SAAUO,KAGd,uCAEI,2BACAP,SAAUQ,EACVP,MAAOU,KAGX,6BACE,4BAAQN,KAAK,UAAb,UCjBOO,EATA,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QACxB,OACE,2BACGD,EAAOE,KADV,IACiBF,EAAOG,OACtB,4BAAQF,QAASA,EAAQD,EAAOzB,KAAhC,YCiBS6B,EApBC,SAAC,GAAkC,IAAhCC,EAA+B,EAA/BA,QAASnB,EAAsB,EAAtBA,OAAQe,EAAc,EAAdA,QAElC,OACEI,EACGnB,QAAO,SAAAoB,GAAC,OACPA,EAAEJ,KACCK,cACAC,SACCtB,EAAOqB,kBAEZE,KAAI,SAAAH,GAAC,OACJ,kBAAC,EAAD,CACEI,IAAKJ,EAAE/B,GACPyB,OAAQM,EACRL,QAASA,QC2JJU,EApKH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTP,EADS,KACAQ,EADA,OAEcD,mBAAS,CAAEtB,QAAS,OAFlC,mBAETA,EAFS,KAEAwB,EAFA,OAGcF,mBAAS,IAHvB,mBAGTf,EAHS,KAGAkB,EAHA,OAIkBH,mBAAS,IAJ3B,mBAITd,EAJS,KAIEkB,EAJF,OAKYJ,mBAAS,IALrB,mBAKT1B,EALS,KAKD+B,EALC,KAOhBC,qBAAU,WACRC,IAEGzC,MAAK,SAAA0C,GACJP,EAAWO,QAEd,IAwHH,OACE,6BACE,yCACA,kBAAC,EAAD,CAAc9B,QAASA,IAEvB,kBAAC,EAAD,CACEL,aATqB,SAACoC,GAAD,OACzBJ,EAAUI,EAAMC,OAAOlC,QASnBA,MAAOF,IAGT,yCAEA,kBAAC,EAAD,CACEQ,aAvBmB,SAAC2B,GACxBN,EAAWM,EAAMC,OAAOlC,QAuBpBO,eApBqB,SAAC0B,GAAD,OACzBL,EAAaK,EAAMC,OAAOlC,QAoBtBQ,SArIU,SAACyB,GACfA,EAAME,iBAENJ,EACU,CACNjB,KAAML,EACNM,OAAQL,IAETpB,MAAK,SAAAsB,GACJa,EAAW,GAAD,mBAAKR,GAAL,CAAcL,KACxBe,EAAW,IACXC,EAAa,IACbF,EACE,CAAExB,QAAQ,SAAD,OAAWU,EAAOE,MAAQV,KAAM,SAE3CgC,YAAW,kBAAMV,EAAW,CAAExB,QAAS,SAAS,QAEjDmC,OAAM,SAAAC,GACLX,EAAW,IACXC,EAAa,IACbF,EACE,CACExB,QAASoC,EAAM/C,SAASC,KAAK8C,MAC7BlC,KAAM,UAGVgC,YAAW,kBAAMV,EAAW,CAAExB,QAAS,SAAS,SA4GhDO,QAASA,EACTC,UAAWA,IAGb,uCAEA,kBAAC,EAAD,CACEO,QAASA,EACTnB,OAAQA,EACRe,QAAS,SAAC1B,GAAD,OAtDI,SAACA,GAAD,OAAQ,SAAC8C,GAC1BF,EACO5C,GACJG,MAAK,SAAA4B,GACAqB,OAAOC,QAAP,iBAAyBtB,EAAEJ,KAA3B,SACFiB,EAAyB5C,GACzBsC,EAAWR,EAAQnB,QAAO,SAAAoB,GAAC,OAAIA,EAAE/B,KAAOA,MACxCuC,EACE,CACExB,QAAQ,WAAD,OAAagB,EAAEJ,MACpBV,KAAM,SAGZgC,YAAW,kBAAMV,EAAW,CAAExB,QAAS,SAAS,KAChDuB,EAAWR,EAAQnB,QAAO,SAAAoB,GAAC,OAAIA,EAAE/B,KAAOA,WAwCzBsD,CAAWtD,QCjKpCuD,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,W","file":"static/js/main.ecb8f5a8.chunk.js","sourcesContent":["import axios from 'axios'\n//const baseUrl = 'http://localhost:3001/api/persons'\n//const baseUrl = 'https://evening-caverns-13941.herokuapp.com/api/persons'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst get = id => {\n  const request = axios.get(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst deleteName = id => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (person) => {\n  const request = axios.put(`${baseUrl}/${person.id}`, person)\n  return request.then(response => response.data)\n}\n\nexport default { get, getAll, create, deleteName, update }","import React from 'react'\n\nconst Filter = ({ handleChange, filter }) => {\n\n  return (\n    <div>\n      Filter shown with\n      <input onChange={handleChange} value={filter} />\n    </div>\n  )\n\n}\n\nexport default Filter","import React from 'react'\n\nconst Notification = ({ message }) => {\n  if (message.message === null) {\n    return null\n  }\n\n  return (\n    <div className={message.type}>\n      {message.message}\n    </div>\n  )\n}\n\nexport default Notification\n","import React from 'react'\n\nconst PersonForm = (\n  {\n    onNameChange,\n    onNumberChange,\n    onSubmit,\n    newName,\n    newNumber,\n\n  }) => {\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        name:\n        <input\n          value={newName}\n          onChange={onNameChange}\n        />\n      </div>\n      <div>\n        Numero:\n          <input\n          onChange={onNumberChange}\n          value={newNumber}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form >\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Person = ({ person, onClick }) => {\n  return (\n    <p>\n      {person.name} {person.number}\n      <button onClick={onClick(person.id)}>delete</button>\n    </p>\n  )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({ persons, filter, onClick }) => {\n\n  return (\n    persons\n      .filter(p =>\n        p.name\n          .toLowerCase()\n          .includes(\n            filter.toLowerCase())\n      )\n      .map(p =>\n        <Person\n          key={p.id}\n          person={p}\n          onClick={onClick}\n        />\n      )\n  )\n}\n\nexport default Persons","import React, { useState, useEffect } from 'react'\n\nimport PersonService from '../services/persons'\nimport Filter from './Filter'\nimport Notification from './Notification'\nimport PersonForm from './PersonForm'\nimport Persons from './Persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [message, setMessage] = useState({ message: null })\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n\n  useEffect(() => {\n    PersonService\n      .getAll()\n      .then(initial => {\n        setPersons(initial)\n      })\n  }, [])\n\n  const addName = (event) => {\n    event.preventDefault()\n\n    PersonService\n      .create({\n        name: newName,\n        number: newNumber\n      })\n      .then(person => {\n        setPersons([...persons, person])\n        setNewName('')\n        setNewNumber('')\n        setMessage(\n          { message: `Added ${person.name}`, type: 'info' }\n        )\n        setTimeout(() => setMessage({ message: null }), 5000)\n      })\n      .catch(error => {\n        setNewName('')\n        setNewNumber('')\n        setMessage(\n          {\n            message: error.response.data.error,\n            type: 'error'\n          }\n        )\n        setTimeout(() => setMessage({ message: null }), 5000)\n\n      })\n\n    /*\n        let person = persons.find(p =>\n          p.name === newName\n        )\n    \n        if (person === undefined) {\n          person = {\n            name: newName,\n            number: newNumber\n          }\n    \n          PersonService\n            .create(person)\n            .then(newPerson => {\n              setPersons([...persons, newPerson])\n              setNewName('')\n              setNewNumber('')\n              setMessage(\n                { message: `Added ${newPerson.name}`, type: 'info' }\n              )\n              setTimeout(() => setMessage({ message: null }), 5000)\n            })\n        } else {\n          if (window.confirm(\n            `${newName} is already added to phonebook,\n            replace the old number with a new one?\n            `)) {\n            const changedPerson = { ...person, number: newNumber }\n            PersonService\n              .update(changedPerson)\n              .then(newPerson => {\n                setPersons(persons.map(p => p.name === newName ? changedPerson : p))\n                setNewName('')\n                setNewNumber('')\n                setMessage(\n                  {\n                    message: `Changed ${newPerson.name}`,\n                    type: 'info'\n                  }\n                )\n                setTimeout(() => setMessage({ message: null }), 5000)\n              }).catch(() => {\n                setNewName('')\n                setNewNumber('')\n                setPersons(persons.filter(p => p.id !== changedPerson.id))\n                setMessage(\n                  {\n                    message: `Infomation of ${changedPerson.name} has already been removed from server`,\n                    type: 'error'\n                  }\n                )\n                setTimeout(() => setMessage({ message: null }), 5000)\n    \n              })\n          }\n        }\n        */\n  }\n\n  const deleteName = (id) => (event) => {\n    PersonService\n      .get(id)\n      .then(p => {\n        if (window.confirm(`Delete ${p.name} ?`)) {\n          PersonService.deleteName(id)\n          setPersons(persons.filter(p => p.id !== id))\n          setMessage(\n            {\n              message: `Deleted ${p.name}`\n              , type: 'info'\n            }\n          )\n          setTimeout(() => setMessage({ message: null }), 5000)\n          setPersons(persons.filter(p => p.id !== id))\n        }\n      })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) =>\n    setNewNumber(event.target.value)\n\n  const handleFilterChange = (event) =>\n    setFilter(event.target.value)\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message} />\n\n      <Filter\n        handleChange={handleFilterChange}\n        value={filter}\n      />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        onSubmit={addName}\n        newName={newName}\n        newNumber={newNumber}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons\n        persons={persons}\n        filter={filter}\n        onClick={(id) => deleteName(id)}\n      />\n    </div>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}